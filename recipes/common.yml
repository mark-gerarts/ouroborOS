modules:
  - type: files
    files:
      - source: system
        destination: / # copies files/system/* (* means everything inside it) into your image's root folder /
        # TODO: create docker daemon.json with network overrides (or get used to
        # podman) and other system config stuff.

  - type: default-flatpaks
    configurations:
      - notify: true
        scope: system
        install:
          - org.mozilla.firefox
          - org.gnome.Loupe
          - org.gnome.Boxes
          - org.gnome.Extensions
          - ar.com.tuxguitar.TuxGuitar
          - org.jabref.jabref
          - com.github.finefindus.eyedropper
          - com.valvesoftware.Steam
          - md.obsidian.Obsidian
          - org.kde.filelight
          - org.chromium.Chromium
          - org.signal.Signal
          - com.spotify.Client
          - org.libreoffice.LibreOffice
      - scope: user

  - type: signing # this sets up the proper policy & signing files for signed images to work fully

  - type: dnf
    install:
      packages:
        # Essentials
        - vim
        - wget
        - git
        - git-delta
        - inotify-tools
        - unzip

        # Gnome stuff
        - gnome-tweaks
        # TODO: do we want this terminal instead of the built-in of bluefin?
        - gnome-terminal

        # CLI
        - bat
        - pass
        - pandoc
        - xclip
        - tree
        - htop
        - ncdu
        - zip
        - jq

        # Latex
        - hunspell
        - hunspell-en
        - hunspell-en-US
        - hunspell-en-GB

        # TODO:
        # This is way too big to include in the image. Idea: add a script to
        # the repo that can be run onetime on a fresh install that sets up a
        # distrobox for latex and exports the binary (and possibly does other
        # first-time-use things).
        # - texlive-scheme-full
        # TODO: check if java is needed for ltex


        # Dev stuff. This is for some quick-and-dirty scripting. Full-on
        # projects go into a container.
        - python3
        - distrobox
        - dotnet-sdk-9.0

        # Virtualization
        - docker-cli
        - docker-compose
        - podman
        - podman-compose

  - type: gnome-extensions
    install:
      - Blur my Shell
      - AppIndicator and KStatusNotifierItem Support
      - Caffeine
      - Dash to Dock
      - RunCat

  - type: fonts
    fonts:
      nerd-fonts:
        - FiraCode

  - type: script
    scripts:
      - install_duckdb.sh
      # TODO: after an install explore this to automate it (non-user based)
      # https://github.com/qwerty-fr/qwerty-fr/issues/49#issuecomment-1405254634
      - install_qwertyfr.sh

# TODO: check gschema-overrides for interesting stuff.

# TODO: systemd config
# DefaultTimeoutStopSec=10s
# killMode mixed

# TODO journald config
# SystemMaxUse=50M

# TODO: set LC_TIME to nl_BE.UTF-8, TZ to Europe/Brussels
